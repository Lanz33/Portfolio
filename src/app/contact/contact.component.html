<section id="contact">
    <div class="contact-header">
        <div class="line"></div>
        <h2>Contact</h2>
    </div>
    <div class="contact-form-area">
        <div class="contact-text animate-on-scroll">
            <h3>{{ 'contact.description1' | translate}}</h3>
            <p class="animate-on-scroll">{{ 'contact.description2' | translate}}</p>
        </div>
        <form class="contact-form animate-on-scroll" (ngSubmit)="onSubmit(contactForm)" #contactForm="ngForm">
            <div class="inputField" [class.ng-invalid]="nameInput.invalid && nameInput.touched"
                [class.ng-valid]="nameInput.valid && nameInput.touched">
                <input #nameInput="ngModel" [(ngModel)]="contactData.name" minlength="2" name="name"
                    placeholder="Your name" required>
                <div class="validation-icon valid" *ngIf="nameInput.valid && nameInput.touched">
                    <img src="/assets/img/valid.svg" alt="valid">
                </div>
                <div class="validation-icon invalid" *ngIf="nameInput.invalid && nameInput.touched">
                    <img src="/assets/img/notValid.svg" alt="invalid">
                </div>
            </div>
            @if(!nameInput.valid && nameInput.touched) {
            <p class="error">Your name is required</p>
            }
            <div class="inputField" [class.ng-invalid]="emailInput.invalid && emailInput.touched"
                [class.ng-valid]="emailInput.valid && emailInput.touched">
                <input #emailInput="ngModel" type="email" [(ngModel)]="contactData.email" placeholder="Your email"
                    name="email" required pattern="[a-zA-Z0-9._%+\-]+@[a-zA-Z0-9.\-]+\.[a-zA-Z]{2,}">
                <div class="validation-icon valid" *ngIf="emailInput.valid && emailInput.touched">
                    <img src="/assets/img/valid.svg" alt="valid">
                </div>
                <div class="validation-icon invalid" *ngIf="emailInput.invalid && emailInput.touched">
                    <img src="/assets/img/notValid.svg" alt="invalid">
                </div>
            </div>
            @if(!emailInput.valid && emailInput.touched) {
            <p class="error">Not valid email</p>
            }
            <div class="inputField" [class.ng-invalid]="message.invalid && message.touched"
                [class.ng-valid]="message.valid && message.touched">
                <textarea #message="ngModel" minlength="4" [(ngModel)]="contactData.message" name="message"
                    placeholder="Your message" required></textarea>
                <div class="validation-icon valid" *ngIf="message.valid && message.touched">
                    <img src="/assets/img/valid.svg" alt="valid">
                </div>
                <div class="validation-icon invalid" *ngIf="message.invalid && message.touched">
                    <img src="/assets/img/notValid.svg" alt="invalid">
                </div>
            </div>
            @if(!message.valid && message.touched) {
            <p class="error">Message must be at least 4 characters long.</p>
            }
            <mat-checkbox class="example-margin" [(ngModel)]="checked" name="checked"
                [labelPosition]="getLabelPosition()" [disabled]="getIsDisabled()">
                IÂ´ve read the <a (click)="openPrivacyPolicy()" class="link">privacy policy</a> and agree to the
                processing of my data as outlined.
            </mat-checkbox>
            <button class="send-button" type="submit" value="Submit"
                [ngClass]="{'valid-button': nameInput.valid && emailInput.valid && message.valid && checked}"
                [disabled]="!(nameInput.valid && emailInput.valid && message.valid && checked)">Send Message</button>
        </form>
    </div>
    <app-privacy-policy-overlay [isVisible]="showPrivacyPolicy" (closed)="onPrivacyPolicyClosed()">
    </app-privacy-policy-overlay>

    <div class="background-animation">
        <svg width="200" height="400" viewBox="0 0 678 805" fill="none">
            <defs>
                <filter id="turbulence-filter">
                    <feTurbulence id="turbulence" baseFrequency="0.01" numOctaves="5" seed="20" />
                    <feDisplacementMap in="SourceGraphic" in2="turbulence" scale="200" xChannelSelector="R"
                        yChannelSelector="G" />
                    <animate xlink:href="#turbulence" attributeName="baseFrequency" from="0.005" to="0.001" dur="30s"
                        calcMode="spline" keySplines="0.42 0 0.58 1; 0.42 0 0.58 1" repeatCount="indefinite" />
                    <animate xlink:href="#turbulence" attributeName="numOctaves" values="3;5;3" dur="30s"
                        calcMode="spline" keySplines="0.42 0 0.58 1; 0.42 0 0.58 1" repeatCount="indefinite" />
                </filter>
            </defs>
            <path
                d="M405.303 708.084C405.978 652.277 391.433 576.961 355.658 477.524C392.332 395.035 819.289 789.943 405.303 708.084C402.116 971.425 60.0189 800.324 10.5824 679.228C-64.3086 495.779 -88.3907 486.259 -163.612 451.197C-238.833 416.135 -395.212 306.44 -256.876 259.465C-250.43 257.277 -244.646 255.383 -239.467 253.763C-257.883 224.722 -263.193 188.223 -209.085 151.446C69.8372 -38.137 423.098 291.151 321.492 413.181C228.333 525.066 358.304 698.791 405.303 708.084Z"
                fill="#9747FF" filter="url(#turbulence-filter)" />
        </svg>
    </div>
</section>